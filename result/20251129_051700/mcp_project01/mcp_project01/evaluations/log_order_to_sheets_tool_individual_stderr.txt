2025-11-29 05:17:34 - mcp_server - INFO - ğŸš€ å¼€å§‹é¤å…è®¢å•å¤„ç†æµç¨‹
2025-11-29 05:17:34 - mcp_server - INFO - ==================================================
2025-11-29 05:17:35 - mcp_server - INFO - Initializing MCP server 'Restaurant Order Server'
2025-11-29 05:17:35 - mcp_server - INFO - MCP server initialized with tools, resources, and prompts.
2025-11-29 05:17:35 - mcp_server - INFO - Starting MCP server on stdio


â•­â”€ FastMCP 2.0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                            â”‚
â”‚        _ __ ___ ______           __  __  _____________    ____    ____     â”‚
â”‚       _ __ ___ / ____/___ ______/ /_/  |/  / ____/ __ \  |___ \  / __ \    â”‚
â”‚      _ __ ___ / /_  / __ `/ ___/ __/ /|_/ / /   / /_/ /  ___/ / / / / /    â”‚
â”‚     _ __ ___ / __/ / /_/ (__  ) /_/ /  / / /___/ ____/  /  __/_/ /_/ /     â”‚
â”‚    _ __ ___ /_/    \__,_/____/\__/_/  /_/\____/_/      /_____(_)____/      â”‚
â”‚                                                                            â”‚
â”‚                                                                            â”‚
â”‚                                                                            â”‚
â”‚    ğŸ–¥ï¸  Server name:     Restaurant Order Server                             â”‚
â”‚    ğŸ“¦ Transport:       STDIO                                               â”‚
â”‚                                                                            â”‚
â”‚    ğŸ“š Docs:            https://gofastmcp.com                               â”‚
â”‚    ğŸš€ Deploy:          https://fastmcp.cloud                               â”‚
â”‚                                                                            â”‚
â”‚    ğŸï¸  FastMCP version: 2.11.3                                              â”‚
â”‚    ğŸ¤ MCP version:     1.13.1                                              â”‚
â”‚                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯


[11/29/25 05:17:35] INFO     Starting MCP server 'Restaurant      server.py:1445
                             Order Server' with transport 'stdio'               
2025-11-29 05:17:35 - mcp_server - INFO - ğŸ“‹ å¯ç”¨å·¥å…·: ['initialize_conversation_tool', 'classify_intent_tool', 'extract_order_info_tool', 'validate_extraction_tool', 'validate_format_order_tool', 'generate_greeting_response_tool', 'generate_clarification_response_tool', 'generate_error_response_tool', 'generate_missing_info_response_tool', 'generate_order_summary_tool', 'process_confirmation_tool', 'log_order_to_sheets_tool', 'generate_success_response_tool', 'update_conversation_state_tool']
2025-11-29 05:17:35 - mcp_server - INFO - 
2025-11-29 05:17:35 - mcp_server - INFO - ğŸ“ æ­¥éª¤1: æå–è®¢å•ä¿¡æ¯
2025-11-29 05:17:35 - mcp_server - INFO - ç”¨æˆ·è¾“å…¥: I want 2 lattes and 1 cappuccino for table 5
2025-11-29 05:17:35 - mcp_server - INFO - Extracted: 2 items, table: 5
2025-11-29 05:17:35 - mcp_server - INFO - æå–ç»“æœ: {
  "success": true,
  "extraction_result": {
    "items": [
      "latte",
      "cappuccino"
    ],
    "quantities": [
      2,
      1
    ],
    "table_number": 5,
    "extraction_count": 2
  },
  "items": [
    "latte",
    "cappuccino"
  ],
  "quantities": [
    2,
    1
  ],
  "table_number": 5,
  "extraction_count": 2,
  "message": "Extracted 2 items for table 5"
}
2025-11-29 05:17:35 - mcp_server - INFO - 
2025-11-29 05:17:35 - mcp_server - INFO - ğŸ“ æ­¥éª¤2: æ ¼å¼åŒ–å’ŒéªŒè¯è®¢å•
2025-11-29 05:17:35 - mcp_server - INFO - Order formatted: 2 items, complete: True
2025-11-29 05:17:35 - mcp_server - INFO - è®¢å•æ ¼å¼åŒ–ç»“æœ: {
  "success": true,
  "order": {
    "items": [
      {
        "name": "latte",
        "quantity": 2
      },
      {
        "name": "cappuccino",
        "quantity": 1
      }
    ],
    "table_number": 5,
    "status": "draft",
    "timestamp": "2025-11-29T05:17:35.183474"
  },
  "is_complete": true,
  "missing_info": [],
  "total_items": 2,
  "message": "Order formatted with 2 items"
}
2025-11-29 05:17:35 - mcp_server - INFO - 
2025-11-29 05:17:35 - mcp_server - INFO - ğŸ“ æ­¥éª¤3: ç”Ÿæˆè®¢å•æ‘˜è¦
2025-11-29 05:17:35 - mcp_server - INFO - è®¢å•æ‘˜è¦: {
  "success": true,
  "response": "Here's your order summary:\n2 latte\n1 cappuccino\nTable number: 5\n\nShall I confirm this order?",
  "new_state": "confirmation",
  "message": "Order summary generated"
}
2025-11-29 05:17:35 - mcp_server - INFO - 
2025-11-29 05:17:35 - mcp_server - INFO - ğŸ“ æ­¥éª¤4: å¤„ç†è®¢å•ç¡®è®¤
2025-11-29 05:17:35 - mcp_server - INFO - æ¨¡æ‹Ÿç”¨æˆ·ç¡®è®¤: Yes, confirm
2025-11-29 05:17:35 - mcp_server - INFO - Order confirmed: 2 items for table 5
2025-11-29 05:17:35 - mcp_server - INFO - ç¡®è®¤ç»“æœ: {
  "success": true,
  "has_order_to_confirm": true,
  "confirmed_order": {
    "items": [
      {
        "name": "latte",
        "quantity": 2
      },
      {
        "name": "cappuccino",
        "quantity": 1
      }
    ],
    "table_number": 5,
    "status": "confirmed",
    "timestamp": "2025-11-29T05:17:35.183474",
    "confirmed_at": "2025-11-29T05:17:35.190261"
  },
  "message": "Order confirmed successfully"
}
2025-11-29 05:17:35 - mcp_server - INFO - 
2025-11-29 05:17:35 - mcp_server - INFO - âœ… è®¢å•ç¡®è®¤æˆåŠŸï¼
2025-11-29 05:17:35 - mcp_server - INFO - ğŸ“ æ­¥éª¤5: è®°å½•è®¢å•åˆ°Google Sheets
                    ERROR    Error calling tool              tool_manager.py:231
                             'log_order_to_sheets_tool'                         
                             â•­â”€ Traceback (most recent calâ”€â•®                    
                             â”‚ /hdd/yxyang/MCPGen/.venv/li â”‚                    
                             â”‚ b/python3.12/site-packages/ â”‚                    
                             â”‚ fastmcp/tools/tool_manager. â”‚                    
                             â”‚ py:222 in call_tool         â”‚                    
                             â”‚                             â”‚                    
                             â”‚   219 â”‚   â”‚   â”‚   â”‚   raise â”‚                    
                             â”‚   220 â”‚   â”‚   â”‚             â”‚                    
                             â”‚   221 â”‚   â”‚   â”‚   try:      â”‚                    
                             â”‚ â± 222 â”‚   â”‚   â”‚   â”‚   retur â”‚                    
                             â”‚   223 â”‚   â”‚   â”‚             â”‚                    
                             â”‚   224 â”‚   â”‚   â”‚   # raise T â”‚                    
                             â”‚   225 â”‚   â”‚   â”‚   except To â”‚                    
                             â”‚                             â”‚                    
                             â”‚ /hdd/yxyang/MCPGen/.venv/li â”‚                    
                             â”‚ b/python3.12/site-packages/ â”‚                    
                             â”‚ fastmcp/tools/tool.py:298   â”‚                    
                             â”‚ in run                      â”‚                    
                             â”‚                             â”‚                    
                             â”‚   295 â”‚   â”‚   result = type â”‚                    
                             â”‚   296 â”‚   â”‚                 â”‚                    
                             â”‚   297 â”‚   â”‚   if inspect.is â”‚                    
                             â”‚ â± 298 â”‚   â”‚   â”‚   result =  â”‚                    
                             â”‚   299 â”‚   â”‚                 â”‚                    
                             â”‚   300 â”‚   â”‚   if isinstance â”‚                    
                             â”‚   301 â”‚   â”‚   â”‚   return re â”‚                    
                             â”‚                             â”‚                    
                             â”‚ /tmp/mcp_isolated_test_mi8f â”‚                    
                             â”‚ 3y36/mcp_project01/mcp_serv â”‚                    
                             â”‚ er/server.py:146 in         â”‚                    
                             â”‚ log_order_to_sheets_tool    â”‚                    
                             â”‚                             â”‚                    
                             â”‚   143 async def log_order_t â”‚                    
                             â”‚   144 â”‚   """Log confirmed  â”‚                    
                             â”‚   145 â”‚   context = {"step_ â”‚                    
                             â”‚ â± 146 â”‚   return await log_ â”‚                    
                             â”‚   147                       â”‚                    
                             â”‚   148                       â”‚                    
                             â”‚   149 @mcp.tool()           â”‚                    
                             â”‚                             â”‚                    
                             â”‚ /tmp/mcp_isolated_test_mi8f â”‚                    
                             â”‚ 3y36/mcp_project01/mcp_serv â”‚                    
                             â”‚ er/tools/restaurant_tools.p â”‚                    
                             â”‚ y:825 in                    â”‚                    
                             â”‚ log_order_to_sheets         â”‚                    
                             â”‚                             â”‚                    
                             â”‚   822 â”‚   SERVICE_ACCOUNT_F â”‚                    
                             â”‚   823 â”‚                     â”‚                    
                             â”‚   824 â”‚   # Authenticate an â”‚                    
                             â”‚ â± 825 â”‚   credentials =     â”‚                    
                             â”‚       service_account.Crede â”‚                    
                             â”‚   826 â”‚   service = build(' â”‚                    
                             â”‚   827 â”‚                     â”‚                    
                             â”‚   828 â”‚   # Prepare the ord â”‚                    
                             â”‚                             â”‚                    
                             â”‚ /hdd/yxyang/MCPGen/.venv/li â”‚                    
                             â”‚ b/python3.12/site-packages/ â”‚                    
                             â”‚ google/oauth2/service_accou â”‚                    
                             â”‚ nt.py:260 in                â”‚                    
                             â”‚ from_service_account_file   â”‚                    
                             â”‚                             â”‚                    
                             â”‚   257 â”‚   â”‚   â”‚   google.au â”‚                    
                             â”‚   258 â”‚   â”‚   â”‚   â”‚   crede â”‚                    
                             â”‚   259 â”‚   â”‚   """           â”‚                    
                             â”‚ â± 260 â”‚   â”‚   info, signer  â”‚                    
                             â”‚   261 â”‚   â”‚   â”‚   filename, â”‚                    
                             â”‚   262 â”‚   â”‚   )             â”‚                    
                             â”‚   263 â”‚   â”‚   return cls._f â”‚                    
                             â”‚                             â”‚                    
                             â”‚ /hdd/yxyang/MCPGen/.venv/li â”‚                    
                             â”‚ b/python3.12/site-packages/ â”‚                    
                             â”‚ google/auth/_service_accoun â”‚                    
                             â”‚ t_info.py:78 in             â”‚                    
                             â”‚ from_filename               â”‚                    
                             â”‚                             â”‚                    
                             â”‚   75 â”‚   â”‚   Tuple[ Mapping â”‚                    
                             â”‚   76 â”‚   â”‚   â”‚   info and a â”‚                    
                             â”‚   77 â”‚   """                â”‚                    
                             â”‚ â± 78 â”‚   with io.open(filen â”‚                    
                             â”‚   79 â”‚   â”‚   data = json.lo â”‚                    
                             â”‚   80 â”‚   â”‚   return data, f â”‚                    
                             â”‚   81                        â”‚                    
                             â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                    
                             TypeError: expected str, bytes                     
                             or os.PathLike object, not                         
                             NoneType                                           
2025-11-29 05:17:35 - mcp_server - ERROR - 
âŒ æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯: Error calling tool 'log_order_to_sheets_tool': expected str, bytes or os.PathLike object, not NoneType
Traceback (most recent call last):
  File "/tmp/mcp_isolated_test_mi8f3y36/mcp_project01/run_workflow.py", line 197, in main
    await restaurant_order_workflow()
  File "/tmp/mcp_isolated_test_mi8f3y36/mcp_project01/run_workflow.py", line 151, in restaurant_order_workflow
    sheets_result = await client.call_tool(
                    ^^^^^^^^^^^^^^^^^^^^^^^
  File "/hdd/yxyang/MCPGen/.venv/lib/python3.12/site-packages/fastmcp/client/client.py", line 866, in call_tool
    raise ToolError(msg)
fastmcp.exceptions.ToolError: Error calling tool 'log_order_to_sheets_tool': expected str, bytes or os.PathLike object, not NoneType
